# Advanced AI Image Detector API

This API analyzes images to determine whether they were generated by AI or captured by real cameras. It uses multiple techniques including:

- DCT coefficient analysis (JPEG compression artifacts)
- Noise pattern analysis
- Frequency domain analysis (Fourier transform)
- EXIF metadata examination

## Features

- Detect AI-generated images with confidence scores
- Support for JPEG, PNG, and HEIC/HEIF formats
- Batch processing of multiple images
- Detailed analysis results
- Image comparison functionality

## Installation

### Prerequisites

- Python 3.8+
- pip

### Setup

1. Clone the repository:

```bash
git clone https://github.com/yourusername/ai-detector-api.git
cd ai-detector-api
```

2. Create a virtual environment:

```bash
python -m venv .venv
source .venv/bin/activate  # On Windows: .venv\Scripts\activate
```

3. Install required packages:

```bash
pip install -r requirements.txt
```

For HEIC/HEIF support, install the additional package:

```bash
pip install pillow-heif
```

## Running the API

Start the API server:

```bash
python main.py
```

The API will be available at `http://localhost:8000`.

## API Endpoints

- `POST /api/detect` - Analyze a single image
- `POST /api/detect/batch` - Analyze multiple images
- `POST /api/analysis_details` - Get detailed analysis results
- `POST /api/compare` - Compare two images
- `GET /api/health` - Check API health

## Testing

### Single Image Testing

Use the test_detector.py script:

```bash
python test_detector.py path/to/your/image.jpg
```

### Comprehensive Testing

The test_detector_suite.py script provides more testing options:

```bash
# Test a single image
python test_detector_suite.py test path/to/your/image.jpg

# Get detailed analysis
python test_detector_suite.py test path/to/your/image.jpg --detailed

# Batch test multiple images
python test_detector_suite.py batch image1.jpg image2.jpg image3.jpg

# Test all images in a directory
python test_detector_suite.py directory path/to/image/directory --save

# Compare two images
python test_detector_suite.py compare image1.jpg image2.jpg

# Check API health
python test_detector_suite.py health
```

### Automated Tests

Run unit tests:

```bash
python unit_tests.py
```

Run integration tests (API must be running):

```bash
python integration_tests.py
```

## Understanding the Results

The API returns several key pieces of information:

- `is_ai_generated`: Boolean indicating whether the image is likely AI-generated
- `confidence`: Score between 0-1 indicating confidence in the assessment
- `indicators`: List of factors contributing to the assessment
- Detailed analysis data in various categories

### Common Indicators of AI Generation

1. Missing EXIF data typically found in camera images
2. Low JPEG compression artifacts (low AC standard deviation)
3. Unusual DC/AC coefficient ratios
4. Low natural noise levels
5. Low edge detail (laplacian standard deviation)
6. Abnormal frequency distributions

### Interpreting Confidence Scores

- 0.0-0.3: Likely a real photograph
- 0.3-0.6: Uncertain, could be either real or AI
- 0.6-1.0: Likely AI-generated

## Troubleshooting

- If you encounter issues with HEIC files, ensure pillow-heif is installed
- For performance issues, consider reducing image resolution before analysis
- For unexpected results, try comparing with a known real image using the comparison endpoint

## License

[Specify your license here]

## Contributing

Contributions are welcome! Please feel free to submit a Pull Request.

1. Fork the repository
2. Create your feature branch
3. Commit your changes
4. Push to the branch
5. Open a Pull Request 